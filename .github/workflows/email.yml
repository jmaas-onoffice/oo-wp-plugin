name: Email notification for review request

on:
  pull_request_target:
    types: [review_requested]

jobs:
  notify-review-request:
    runs-on: ubuntu-latest
    name: Send email
    steps:
      - name: Send mail test
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: ${{ secrets.EMAIL_SERVER_ADDRESS }}
          server_port: 465
          username: ${{ secrets.EMAIL_USER }}
          password: ${{ secrets.EMAIL_PASSWORD }}
          subject: "[WP-Plugin] Review requested for ${{ github.event.pull_request.title }}"
          to: j.maas@onoffice.de
          from: WP-Plugin GitHub Action
          convert_markdown: true
          html_body: |
            A review was requested for a PR on the [WordPress plugin repo](https://github.com/${{ github.repository }}).

            A ticket was created which you can track on. Please make it visible:

            1. Open the project for ${{ github.event.pull_request.title }}.
            2. Set it to "In Bearbeitung".
            3. The ticket should appear in your tasks.